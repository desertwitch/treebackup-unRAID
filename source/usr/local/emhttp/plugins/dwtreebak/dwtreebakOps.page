Menu="Utilities"
Type="xmenu"
Title="Tree Backup"
Icon="tree"
Tag="tree"
Markdown="false"
---
<?
/* Copyright Derek Macias (parts of code from NUT package)
 * Copyright macester (parts of code from NUT package)
 * Copyright gfjardim (parts of code from NUT package)
 * Copyright SimonF (parts of code from NUT package)
 * Copyright Dan Landon (parts of code from Web GUI)
 * Copyright Bergware International (parts of code from Web GUI)
 * Copyright Lime Technology (any and all other parts of Unraid)
 *
 * Copyright desertwitch (as author and maintainer of this file)
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License 2
 * as published by the Free Software Foundation.
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 */
?>

<style>
    .ms-collapsible-bar {
        cursor: pointer;
        height: 3px !important;
        text-align: center !important;
        font-size: 8px !important;
        color: #666;
        line-height: 1;
        padding: 0;
    }
</style>

<table class="tablesorter shift" autofocus>
    <tbody>
        <tr id="ms-collapsible">
            <td style="width: 300px; text-align: center; vertical-align: middle; white-space: nowrap;">
                <div style="margin:15px;">
                    <i class="fa fa-tree" style="font-size: 100px;"></i>
                    <div style="margin-top:10px;">
                    <span style="font-size:1.5rem;font-weight:bold;">Tree Backup</span><br>
                    Keep track of what files you had in case of data loss.
                    </div>
                </div>
            </td>

            <td style="width: 100%;"></td>

            <td style="text-align: right; vertical-align:middle; white-space: nowrap;font-size:1.5rem;">
                <a href="https://github.com/desertwitch/mirrorshuttle#readme" style="margin: 0 15px;" target="_blank">Documentation</a><br>
                <a href="https://pkg.go.dev/github.com/desertwitch/mirrorshuttle" style="margin: 0 15px;" target="_blank">Go Reference Website</a><br>
                <a href="https://forums.unraid.net/topic/191119-plugin-mirrorshuttle-for-unraid/" style="margin: 0 15px;" target="_blank">Support Thread (Forums)</a>
            </td>
        </tr>
        <tr>
            <td colspan="3" class="ms-collapsible-bar" id="ms-collapsible-toggle" onClick="dwtreebakToggleCollapsible(true)">
                &#9650;
            </td>
        </tr>
    </tbody>
</table>

<div style="max-height: 300px; overflow-y: auto; border: 1px solid #ccc;">
  <table class="tablesorter" style="width:100%; border-collapse: collapse;">
    <thead>
      <tr>
        <th style="position: sticky; top: 0;">Job Status</th>
        <th style="position: sticky; top: 0;">Job Date</th>
        <th style="position: sticky; top: 0;">Backup File</th>
        <th style="position: sticky; top: 0;">Diff File</th>
        <th style="position: sticky; top: 0;">List File</th>
        <th style="position: sticky; top: 0;">Logs</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>OK</td><td>2025-09-01 10:05</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Running</td><td>2025-09-02 11:15</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Failed</td><td>2025-09-03 12:25</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>OK</td><td>2025-09-04 13:35</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Running</td><td>2025-09-05 14:45</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Failed</td><td>2025-09-06 15:55</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>OK</td><td>2025-09-07 16:05</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Running</td><td>2025-09-08 17:15</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Failed</td><td>2025-09-09 18:25</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>OK</td><td>2025-09-10 19:35</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Running</td><td>2025-09-11 20:45</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Failed</td><td>2025-09-12 21:55</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>OK</td><td>2025-09-13 22:05</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Running</td><td>2025-09-14 23:15</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Failed</td><td>2025-09-15 08:25</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>OK</td><td>2025-09-16 09:35</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Running</td><td>2025-09-17 10:45</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Failed</td><td>2025-09-18 11:55</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>OK</td><td>2025-09-19 12:05</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
      <tr><td>Running</td><td>2025-09-20 13:15</td><td><a href="#">ğŸ“¦</a></td><td><a href="#">ğŸ”€</a></td><td><a href="#">ğŸ“‹</a></td><td><a href="#">ğŸ“œ</a></td></tr>
    </tbody>
  </table>
</div>

<div style="margin-right:15px;">
    <form markdown="0" id="dwtreebak-operations" name="dwtreebak_operations" method="POST" action="/update.php" target="progressFrame">
        <input type="hidden" id="dwtreebak-ops-cmd" name="#command" value="/usr/local/emhttp/plugins/dwtreebak/scripts/none">

        <span style="float:right;text-align:right;">
            <input class="dwtreebak-run dwtreebak-tip" type="button" id="dwtreebak-init" value="MANUAL INIT" title="Mirrors the structure of the configured target directory into the configured mirror directory.">
            <input class="dwtreebak-run dwtreebak-tip" type="button" id="dwtreebak-move" value="MANUAL MOVE" title="Moves any new content inside the configured mirror directory into the respective locations within the configured target directory.">
            <input class="dwtreebak-notrun dwtreebak-tip" type="button" id="dwtreebak-stop" value="STOP PROGRAM" title="Stops any running MirrorShuttle instances, this is generally safe to use without causing data loss or corruption.">
            <div style="text-align:right;margin-right:15px;">Please always read and understand the documentation <strong>before</strong> running any operations.</div>
            <br>
        </span>
    </form>
</div>

<script>
function dwtreebakToggleCollapsible(toggle) {
  const $collapsible = $('#ms-collapsible');
  const $toggle = $('#ms-collapsible-toggle');

  if (toggle) {
    const isVisible = $collapsible.is(':visible');
    $collapsible.toggle();
    $toggle.html(!isVisible ? '&#9650;' : '&#9660;');
    $.cookie('dwtreebakCollapsed', !isVisible ? 'false' : 'true', { expires: 1, path: '/' });
  } else {
    const collapsed = $.cookie('dwtreebakCollapsed') === 'true';
    $collapsible.toggle(!collapsed);
    $toggle.html(!collapsed ? '&#9650;' : '&#9660;');
  }
}


$(document).ready(function() {
    $('#dwtreebak-init').click(function(){
        $('#dwtreebak-ops-cmd').val('/usr/local/emhttp/plugins/dwtreebak/scripts/init');
        $('#dwtreebak-operations').submit();
    });

    $('#dwtreebak-move').click(function(){
        $('#dwtreebak-ops-cmd').val('/usr/local/emhttp/plugins/dwtreebak/scripts/move');
        $('#dwtreebak-operations').submit();
    });

    $('#dwtreebak-stop').click(function(){
        $('#dwtreebak-ops-cmd').val('/usr/local/emhttp/plugins/dwtreebak/scripts/stop');
        $('#dwtreebak-operations').submit();
    });

    dwtreebakToggleCollapsible(false);
});
</script>
